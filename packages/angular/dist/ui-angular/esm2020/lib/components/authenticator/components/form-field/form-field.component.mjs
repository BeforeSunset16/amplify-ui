import { Component, Input } from '@angular/core';
import { translate, countryDialCodes, getErrors, } from '@aws-amplify/ui';
import { nanoid } from 'nanoid';
import * as i0 from "@angular/core";
import * as i1 from "../../../../services/authenticator.service";
import * as i2 from "@angular/common";
import * as i3 from "../../../../primitives/password-field/password-field.component";
import * as i4 from "../../../../primitives/phone-number-field/phone-number-field.component";
import * as i5 from "../../../../primitives/text-field/text-field.component";
export class FormFieldComponent {
    constructor(authenticator) {
        this.authenticator = authenticator;
        this.countryDialCodesValue = countryDialCodes;
        this.errorId = nanoid(12);
    }
    get ariaDescribedBy() {
        return this.hasError() ? this.errorId : undefined;
    }
    get errors() {
        const { validationErrors } = this.authenticator;
        return getErrors(validationErrors[this.name]);
    }
    onBlur($event) {
        const { name } = $event.target;
        this.authenticator.updateBlur({ name });
    }
    isPasswordField() {
        return this.formField.type === 'password';
    }
    isPhoneField() {
        return this.formField.type === 'tel';
    }
    hasError() {
        return this.errors?.length > 0;
    }
    translate(phrase) {
        return translate(phrase);
    }
}
FormFieldComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: FormFieldComponent, deps: [{ token: i1.AuthenticatorService }], target: i0.ɵɵFactoryTarget.Component });
FormFieldComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.3.0", type: FormFieldComponent, selector: "amplify-form-field", inputs: { name: "name", formField: "formField" }, ngImport: i0, template: "<div class=\"amplify-flex amplify-field amplify-authenticator__column\">\n  <!-- Country code field -->\n  <amplify-phone-number-field\n    *ngIf=\"isPhoneField()\"\n    [name]=\"name\"\n    [label]=\"formField.label\"\n    [defaultCountryCode]=\"formField.dialCode\"\n    [dialCodeList]=\"formField.dialCodeList\"\n    [placeholder]=\"formField.placeholder\"\n    [required]=\"formField.isRequired\"\n    [labelHidden]=\"formField.labelHidden\"\n    [autocomplete]=\"formField.autocomplete\"\n    [hasError]=\"hasError\"\n    [describedBy]=\"ariaDescribedBy\"\n    type=\"tel\"\n  ></amplify-phone-number-field>\n\n  <amplify-password-field\n    *ngIf=\"isPasswordField()\"\n    [name]=\"name\"\n    [label]=\"formField.label\"\n    [placeholder]=\"formField.placeholder\"\n    [required]=\"formField.isRequired\"\n    [labelHidden]=\"formField.labelHidden\"\n    [autocomplete]=\"formField.autocomplete\"\n    [hasError]=\"hasError\"\n    [describedBy]=\"ariaDescribedBy\"\n    (setBlur)=\"onBlur($event)\"\n  ></amplify-password-field>\n\n  <amplify-text-field\n    *ngIf=\"!isPasswordField() && !isPhoneField()\"\n    [name]=\"name\"\n    [label]=\"formField.label\"\n    [placeholder]=\"formField.placeholder\"\n    [required]=\"formField.isRequired\"\n    [labelHidden]=\"formField.labelHidden\"\n    [autocomplete]=\"formField.autocomplete\"\n    [type]=\"formField.type\"\n    [hasError]=\"hasError\"\n    [describedBy]=\"ariaDescribedBy\"\n  ></amplify-text-field>\n\n  <div data-amplify-sign-up-errors *ngIf=\"hasError()\" [id]=\"errorId\">\n    <div\n      class=\"amplify-text amplify-text--error\"\n      data-variation=\"error\"\n      *ngFor=\"let error of errors\"\n    >\n      {{ translate(error) }}\n    </div>\n  </div>\n</div>\n", dependencies: [{ kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i3.PasswordFieldComponent, selector: "amplify-password-field", inputs: ["autocomplete", "disabled", "fieldId", "initialValue", "label", "name", "placeholder", "required", "labelHidden", "hasError", "describedBy"], outputs: ["setBlur"] }, { kind: "component", type: i4.PhoneNumberFieldComponent, selector: "amplify-phone-number-field", inputs: ["autocomplete", "disabled", "defaultCountryCode", "selectFieldId", "textFieldId", "initialValue", "label", "name", "placeholder", "required", "type", "labelHidden", "dialCodeList", "hasError", "describedBy"] }, { kind: "component", type: i5.TextFieldComponent, selector: "amplify-text-field", inputs: ["autocomplete", "disabled", "fieldId", "initialValue", "label", "name", "placeholder", "required", "type", "labelHidden", "hasError", "describedBy"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: FormFieldComponent, decorators: [{
            type: Component,
            args: [{ selector: 'amplify-form-field', template: "<div class=\"amplify-flex amplify-field amplify-authenticator__column\">\n  <!-- Country code field -->\n  <amplify-phone-number-field\n    *ngIf=\"isPhoneField()\"\n    [name]=\"name\"\n    [label]=\"formField.label\"\n    [defaultCountryCode]=\"formField.dialCode\"\n    [dialCodeList]=\"formField.dialCodeList\"\n    [placeholder]=\"formField.placeholder\"\n    [required]=\"formField.isRequired\"\n    [labelHidden]=\"formField.labelHidden\"\n    [autocomplete]=\"formField.autocomplete\"\n    [hasError]=\"hasError\"\n    [describedBy]=\"ariaDescribedBy\"\n    type=\"tel\"\n  ></amplify-phone-number-field>\n\n  <amplify-password-field\n    *ngIf=\"isPasswordField()\"\n    [name]=\"name\"\n    [label]=\"formField.label\"\n    [placeholder]=\"formField.placeholder\"\n    [required]=\"formField.isRequired\"\n    [labelHidden]=\"formField.labelHidden\"\n    [autocomplete]=\"formField.autocomplete\"\n    [hasError]=\"hasError\"\n    [describedBy]=\"ariaDescribedBy\"\n    (setBlur)=\"onBlur($event)\"\n  ></amplify-password-field>\n\n  <amplify-text-field\n    *ngIf=\"!isPasswordField() && !isPhoneField()\"\n    [name]=\"name\"\n    [label]=\"formField.label\"\n    [placeholder]=\"formField.placeholder\"\n    [required]=\"formField.isRequired\"\n    [labelHidden]=\"formField.labelHidden\"\n    [autocomplete]=\"formField.autocomplete\"\n    [type]=\"formField.type\"\n    [hasError]=\"hasError\"\n    [describedBy]=\"ariaDescribedBy\"\n  ></amplify-text-field>\n\n  <div data-amplify-sign-up-errors *ngIf=\"hasError()\" [id]=\"errorId\">\n    <div\n      class=\"amplify-text amplify-text--error\"\n      data-variation=\"error\"\n      *ngFor=\"let error of errors\"\n    >\n      {{ translate(error) }}\n    </div>\n  </div>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.AuthenticatorService }]; }, propDecorators: { name: [{
                type: Input
            }], formField: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1maWVsZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS1hbmd1bGFyL3NyYy9saWIvY29tcG9uZW50cy9hdXRoZW50aWNhdG9yL2NvbXBvbmVudHMvZm9ybS1maWVsZC9mb3JtLWZpZWxkLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpLWFuZ3VsYXIvc3JjL2xpYi9jb21wb25lbnRzL2F1dGhlbnRpY2F0b3IvY29tcG9uZW50cy9mb3JtLWZpZWxkL2Zvcm0tZmllbGQuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDakQsT0FBTyxFQUNMLFNBQVMsRUFDVCxnQkFBZ0IsRUFFaEIsU0FBUyxHQUNWLE1BQU0saUJBQWlCLENBQUM7QUFDekIsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLFFBQVEsQ0FBQzs7Ozs7OztBQU9oQyxNQUFNLE9BQU8sa0JBQWtCO0lBUTdCLFlBQW9CLGFBQW1DO1FBQW5DLGtCQUFhLEdBQWIsYUFBYSxDQUFzQjtRQUhoRCwwQkFBcUIsR0FBRyxnQkFBZ0IsQ0FBQztRQUN6QyxZQUFPLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBRThCLENBQUM7SUFFM0QsSUFBSSxlQUFlO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFDcEQsQ0FBQztJQUVELElBQUksTUFBTTtRQUNSLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7UUFDaEQsT0FBTyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDaEQsQ0FBQztJQUVNLE1BQU0sQ0FBQyxNQUFhO1FBQ3pCLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBcUIsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUVqRCxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVELGVBQWU7UUFDYixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxLQUFLLFVBQVUsQ0FBQztJQUM1QyxDQUFDO0lBRUQsWUFBWTtRQUNWLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEtBQUssS0FBSyxDQUFDO0lBQ3ZDLENBQUM7SUFFRCxRQUFRO1FBQ04sT0FBTyxJQUFJLENBQUMsTUFBTSxFQUFFLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVELFNBQVMsQ0FBQyxNQUFjO1FBQ3RCLE9BQU8sU0FBUyxDQUFTLE1BQU0sQ0FBQyxDQUFDO0lBQ25DLENBQUM7OytHQXZDVSxrQkFBa0I7bUdBQWxCLGtCQUFrQiw0R0NkL0IsdXREQXFEQTsyRkR2Q2Esa0JBQWtCO2tCQUo5QixTQUFTOytCQUNFLG9CQUFvQjsyR0FJckIsSUFBSTtzQkFBWixLQUFLO2dCQUNHLFNBQVM7c0JBQWpCLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICB0cmFuc2xhdGUsXG4gIGNvdW50cnlEaWFsQ29kZXMsXG4gIEZvcm1GaWVsZE9wdGlvbnMsXG4gIGdldEVycm9ycyxcbn0gZnJvbSAnQGF3cy1hbXBsaWZ5L3VpJztcbmltcG9ydCB7IG5hbm9pZCB9IGZyb20gJ25hbm9pZCc7XG5pbXBvcnQgeyBBdXRoZW50aWNhdG9yU2VydmljZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NlcnZpY2VzL2F1dGhlbnRpY2F0b3Iuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FtcGxpZnktZm9ybS1maWVsZCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9mb3JtLWZpZWxkLmNvbXBvbmVudC5odG1sJyxcbn0pXG5leHBvcnQgY2xhc3MgRm9ybUZpZWxkQ29tcG9uZW50IHtcbiAgQElucHV0KCkgbmFtZTogc3RyaW5nOyAvLyBuYW1lIG9mIHRoZSBpbnB1dCBmaWVsZFxuICBASW5wdXQoKSBmb3JtRmllbGQ6IEZvcm1GaWVsZE9wdGlvbnM7IC8vIGZvcm0gZmllbGQgb3B0aW9ucyBmb3IgdGhpcyBmaWVsZFxuXG4gIHB1YmxpYyBkZWZhdWx0Q291bnRyeUNvZGVWYWx1ZTogc3RyaW5nO1xuICBwdWJsaWMgY291bnRyeURpYWxDb2Rlc1ZhbHVlID0gY291bnRyeURpYWxDb2RlcztcbiAgcHVibGljIGVycm9ySWQgPSBuYW5vaWQoMTIpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYXV0aGVudGljYXRvcjogQXV0aGVudGljYXRvclNlcnZpY2UpIHt9XG5cbiAgZ2V0IGFyaWFEZXNjcmliZWRCeSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmhhc0Vycm9yKCkgPyB0aGlzLmVycm9ySWQgOiB1bmRlZmluZWQ7XG4gIH1cblxuICBnZXQgZXJyb3JzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB7IHZhbGlkYXRpb25FcnJvcnMgfSA9IHRoaXMuYXV0aGVudGljYXRvcjtcbiAgICByZXR1cm4gZ2V0RXJyb3JzKHZhbGlkYXRpb25FcnJvcnNbdGhpcy5uYW1lXSk7XG4gIH1cblxuICBwdWJsaWMgb25CbHVyKCRldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB7IG5hbWUgfSA9IDxIVE1MSW5wdXRFbGVtZW50PiRldmVudC50YXJnZXQ7XG5cbiAgICB0aGlzLmF1dGhlbnRpY2F0b3IudXBkYXRlQmx1cih7IG5hbWUgfSk7XG4gIH1cblxuICBpc1Bhc3N3b3JkRmllbGQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybUZpZWxkLnR5cGUgPT09ICdwYXNzd29yZCc7XG4gIH1cblxuICBpc1Bob25lRmllbGQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybUZpZWxkLnR5cGUgPT09ICd0ZWwnO1xuICB9XG5cbiAgaGFzRXJyb3IoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZXJyb3JzPy5sZW5ndGggPiAwO1xuICB9XG5cbiAgdHJhbnNsYXRlKHBocmFzZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdHJhbnNsYXRlPHN0cmluZz4ocGhyYXNlKTtcbiAgfVxufVxuIiwiPGRpdiBjbGFzcz1cImFtcGxpZnktZmxleCBhbXBsaWZ5LWZpZWxkIGFtcGxpZnktYXV0aGVudGljYXRvcl9fY29sdW1uXCI+XG4gIDwhLS0gQ291bnRyeSBjb2RlIGZpZWxkIC0tPlxuICA8YW1wbGlmeS1waG9uZS1udW1iZXItZmllbGRcbiAgICAqbmdJZj1cImlzUGhvbmVGaWVsZCgpXCJcbiAgICBbbmFtZV09XCJuYW1lXCJcbiAgICBbbGFiZWxdPVwiZm9ybUZpZWxkLmxhYmVsXCJcbiAgICBbZGVmYXVsdENvdW50cnlDb2RlXT1cImZvcm1GaWVsZC5kaWFsQ29kZVwiXG4gICAgW2RpYWxDb2RlTGlzdF09XCJmb3JtRmllbGQuZGlhbENvZGVMaXN0XCJcbiAgICBbcGxhY2Vob2xkZXJdPVwiZm9ybUZpZWxkLnBsYWNlaG9sZGVyXCJcbiAgICBbcmVxdWlyZWRdPVwiZm9ybUZpZWxkLmlzUmVxdWlyZWRcIlxuICAgIFtsYWJlbEhpZGRlbl09XCJmb3JtRmllbGQubGFiZWxIaWRkZW5cIlxuICAgIFthdXRvY29tcGxldGVdPVwiZm9ybUZpZWxkLmF1dG9jb21wbGV0ZVwiXG4gICAgW2hhc0Vycm9yXT1cImhhc0Vycm9yXCJcbiAgICBbZGVzY3JpYmVkQnldPVwiYXJpYURlc2NyaWJlZEJ5XCJcbiAgICB0eXBlPVwidGVsXCJcbiAgPjwvYW1wbGlmeS1waG9uZS1udW1iZXItZmllbGQ+XG5cbiAgPGFtcGxpZnktcGFzc3dvcmQtZmllbGRcbiAgICAqbmdJZj1cImlzUGFzc3dvcmRGaWVsZCgpXCJcbiAgICBbbmFtZV09XCJuYW1lXCJcbiAgICBbbGFiZWxdPVwiZm9ybUZpZWxkLmxhYmVsXCJcbiAgICBbcGxhY2Vob2xkZXJdPVwiZm9ybUZpZWxkLnBsYWNlaG9sZGVyXCJcbiAgICBbcmVxdWlyZWRdPVwiZm9ybUZpZWxkLmlzUmVxdWlyZWRcIlxuICAgIFtsYWJlbEhpZGRlbl09XCJmb3JtRmllbGQubGFiZWxIaWRkZW5cIlxuICAgIFthdXRvY29tcGxldGVdPVwiZm9ybUZpZWxkLmF1dG9jb21wbGV0ZVwiXG4gICAgW2hhc0Vycm9yXT1cImhhc0Vycm9yXCJcbiAgICBbZGVzY3JpYmVkQnldPVwiYXJpYURlc2NyaWJlZEJ5XCJcbiAgICAoc2V0Qmx1cik9XCJvbkJsdXIoJGV2ZW50KVwiXG4gID48L2FtcGxpZnktcGFzc3dvcmQtZmllbGQ+XG5cbiAgPGFtcGxpZnktdGV4dC1maWVsZFxuICAgICpuZ0lmPVwiIWlzUGFzc3dvcmRGaWVsZCgpICYmICFpc1Bob25lRmllbGQoKVwiXG4gICAgW25hbWVdPVwibmFtZVwiXG4gICAgW2xhYmVsXT1cImZvcm1GaWVsZC5sYWJlbFwiXG4gICAgW3BsYWNlaG9sZGVyXT1cImZvcm1GaWVsZC5wbGFjZWhvbGRlclwiXG4gICAgW3JlcXVpcmVkXT1cImZvcm1GaWVsZC5pc1JlcXVpcmVkXCJcbiAgICBbbGFiZWxIaWRkZW5dPVwiZm9ybUZpZWxkLmxhYmVsSGlkZGVuXCJcbiAgICBbYXV0b2NvbXBsZXRlXT1cImZvcm1GaWVsZC5hdXRvY29tcGxldGVcIlxuICAgIFt0eXBlXT1cImZvcm1GaWVsZC50eXBlXCJcbiAgICBbaGFzRXJyb3JdPVwiaGFzRXJyb3JcIlxuICAgIFtkZXNjcmliZWRCeV09XCJhcmlhRGVzY3JpYmVkQnlcIlxuICA+PC9hbXBsaWZ5LXRleHQtZmllbGQ+XG5cbiAgPGRpdiBkYXRhLWFtcGxpZnktc2lnbi11cC1lcnJvcnMgKm5nSWY9XCJoYXNFcnJvcigpXCIgW2lkXT1cImVycm9ySWRcIj5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cImFtcGxpZnktdGV4dCBhbXBsaWZ5LXRleHQtLWVycm9yXCJcbiAgICAgIGRhdGEtdmFyaWF0aW9uPVwiZXJyb3JcIlxuICAgICAgKm5nRm9yPVwibGV0IGVycm9yIG9mIGVycm9yc1wiXG4gICAgPlxuICAgICAge3sgdHJhbnNsYXRlKGVycm9yKSB9fVxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuIl19